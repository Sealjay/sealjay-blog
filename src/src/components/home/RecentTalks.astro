---
import FormattedDate from '../partials/FormattedDate.astro'

interface SpeakingEntry {
  data: {
    title: string
    event: string
    eventType: string
    date: Date
    url: string
  }
}

interface Props {
  entries: SpeakingEntry[]
}

const { entries } = Astro.props

const eventTypeClasses: Record<string, string> = {
  Conference: 'bg-orange-100 text-orange-700 dark:bg-orange-900/40 dark:text-orange-300',
  Video: 'bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-300',
  'Media Mention': 'bg-pink-100 text-pink-700 dark:bg-pink-900/40 dark:text-pink-300',
  Podcast: 'bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300',
  Workshop: 'bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-300',
  Webinar: 'bg-cyan-100 text-cyan-700 dark:bg-cyan-900/40 dark:text-cyan-300',
  Panel: 'bg-teal-100 text-teal-700 dark:bg-teal-900/40 dark:text-teal-300',
}
---

<div>
  <h3 class="text-sm font-semibold uppercase tracking-wider text-zinc-500 dark:text-zinc-400 mb-4">Recent Talks</h3>
  <div class="flex flex-col gap-2">
    {entries.map((entry) => (
      <a
        href={entry.data.url}
        target="_blank"
        rel="noopener noreferrer"
        class="group flex items-start gap-3 rounded-lg bg-white/90 dark:bg-zinc-800/70 backdrop-blur ring-1 ring-zinc-200/60 dark:ring-zinc-700/40 px-3 py-2.5 shadow-sm hover:shadow-md transition-all duration-200 hover:-translate-y-0.5"
      >
        <div class="min-w-0 flex-1">
          <span class="text-sm font-semibold text-zinc-900 dark:text-zinc-100 group-hover:text-accent-600 dark:group-hover:text-accent-400 transition-colors line-clamp-1">
            {entry.data.title}
          </span>
          <div class="mt-1 flex items-center gap-2 text-xs text-zinc-500 dark:text-zinc-400">
            <span class={`inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-medium ${eventTypeClasses[entry.data.eventType] ?? 'bg-zinc-100 text-zinc-700 dark:bg-zinc-700 dark:text-zinc-300'}`}>
              {entry.data.eventType}
            </span>
            <span class="truncate">{entry.data.event}</span>
          </div>
        </div>
        <svg xmlns="http://www.w3.org/2000/svg" class="shrink-0 h-4 w-4 mt-1 text-zinc-400 dark:text-zinc-500 transition-transform group-hover:translate-x-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
        </svg>
      </a>
    ))}
  </div>
  <a href="/speaking" class="mt-3 inline-flex items-center text-sm font-medium text-accent-600 dark:text-accent-400 hover:text-accent-700 dark:hover:text-accent-300 transition-colors gap-1">
    All speaking
    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
    </svg>
  </a>
</div>

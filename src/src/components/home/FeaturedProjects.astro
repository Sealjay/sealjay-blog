---
interface ProjectEntry {
  data: {
    title: string
    description: string
    status: string
    techStack: string[]
    repoUrl?: string
    demoUrl?: string
    featured: boolean
  }
}

interface Props {
  projects: ProjectEntry[]
}

const { projects } = Astro.props

const statusClasses: Record<string, string> = {
  Active: 'bg-green-100 text-green-700 dark:bg-green-900/40 dark:text-green-300',
  Maintained: 'bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300',
  Archived: 'bg-zinc-100 text-zinc-700 dark:bg-zinc-700 dark:text-zinc-300',
  Contribution: 'bg-violet-100 text-violet-700 dark:bg-violet-900/40 dark:text-violet-300',
}
---

<div>
  <h3 class="text-sm font-semibold uppercase tracking-wider text-zinc-500 dark:text-zinc-400 mb-4">Featured Projects</h3>
  <div class="flex flex-col gap-2">
    {projects.map((project) => {
      const projectUrl = project.data.repoUrl ?? project.data.demoUrl ?? '/projects'
      const isExternal = !!(project.data.repoUrl ?? project.data.demoUrl)
      return (
      <a
        href={projectUrl}
        target={isExternal ? '_blank' : undefined}
        rel={isExternal ? 'noopener noreferrer' : undefined}
        class="group block rounded-xl bg-white/90 dark:bg-zinc-800/70 ring-1 ring-zinc-200/60 dark:ring-zinc-700/40 px-3 py-2.5 shadow-sm hover:shadow-md transition-all duration-200 hover:-translate-y-0.5"
      >
        <div class="flex items-center gap-2">
          <span class="text-sm font-semibold text-zinc-900 dark:text-zinc-100 group-hover:text-accent-600 dark:group-hover:text-accent-400 transition-colors truncate">
            {project.data.title}
          </span>
          <span class={`shrink-0 inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-medium ${statusClasses[project.data.status] ?? ''}`}>
            {project.data.status}
          </span>
        </div>
        <p class="mt-1 text-xs text-zinc-500 dark:text-zinc-400 line-clamp-2">
          {project.data.description}
        </p>
        <div class="mt-1.5 flex flex-wrap gap-1">
          {project.data.techStack.slice(0, 3).map((tech) => (
            <span class="inline-flex items-center rounded-full bg-zinc-100 dark:bg-zinc-700/50 px-1.5 py-0.5 text-[10px] text-zinc-600 dark:text-zinc-400">
              {tech}
            </span>
          ))}
        </div>
        {isExternal && <span class="sr-only">(opens in new tab)</span>}
      </a>
      )
    })}
  </div>
  <a href="/projects" class="mt-3 inline-flex items-center text-sm font-medium text-accent-600 dark:text-accent-400 hover:text-accent-700 dark:hover:text-accent-300 transition-colors gap-1">
    All projects
    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
    </svg>
  </a>
</div>

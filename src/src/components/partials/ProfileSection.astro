---
import { currentRole, location as configLocation, professionalBadges, formerRoles } from "../../config/personal";
import SocialLinks from "./IndexSocialLinks.astro";
import Badge from "./Badge.astro";

interface Props {
  imageSrc: string;
  imageAlt: string;
  title?: string;
  job?: string;
  location?: string;
  showBadges?: boolean;
  showFormerRoles?: boolean;
}

const {
  imageSrc,
  imageAlt,
  showBadges = true,
  showFormerRoles = true
} = Astro.props;
---

<div class="profile-section">
  <!-- Image (Mobile: top, Desktop: left) -->
  <div class="profile-section__image-col">
    <div class="profile-section__image-wrapper">
      <img
        src={imageSrc}
        alt={imageAlt}
        class="profile-section__photo"
      />
    </div>

    <!-- Mobile Social Links -->
    <div class="profile-section__social-mobile">
      <h3 class="profile-section__social-heading">Connect with me</h3>
      <SocialLinks />
    </div>
  </div>

  <!-- Content (Mobile: bottom, Desktop: left) -->
  <div class="profile-section__content">
    <div class="profile-section__role-badge">
      <span>{currentRole.displayText}</span>
    </div>

    <h2 class="profile-section__name">
      I'm Chris Lloyd-Jones, Sealjay.
    </h2>

    <div class="profile-section__bio">
      <slot name="bio" />
    </div>

    <div class="profile-section__badges">
      <slot name="badges" />

      {showBadges && professionalBadges.map(badge => (
        <Badge
          text={badge.text}
          url={badge.url}
          isFormerRole={badge.isFormerRole}
        />
      ))}

      {showFormerRoles && formerRoles.map(role => (
        <Badge
          text={role.text}
          url={role.url}
          isFormerRole={role.isFormerRole}
        />
      ))}
    </div>

    <!-- Desktop Social Links -->
    <div class="profile-section__social-desktop">
      <h3 class="profile-section__social-heading">Connect with me</h3>
      <SocialLinks />
    </div>
  </div>
</div>

<style>
  .profile-section {
    display: flex;
    flex-direction: column;
    gap: 3rem;
  }

  @media (min-width: 1024px) {
    .profile-section {
      flex-direction: row;
      gap: 40px;
    }
  }

  .profile-section__image-col {
    flex-shrink: 0;
  }

  @media (min-width: 1024px) {
    .profile-section__image-col {
      width: 280px;
    }
  }

  .profile-section__image-wrapper {
    max-width: 280px;
    margin: 0 auto;
    overflow: hidden;
  }

  @media (min-width: 1024px) {
    .profile-section__image-wrapper {
      max-width: none;
    }
  }

  .profile-section__photo {
    width: 100%;
    aspect-ratio: 1;
    object-fit: cover;
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-border);
  }

  .profile-section__social-mobile {
    margin-top: 2rem;
  }

  @media (min-width: 1024px) {
    .profile-section__social-mobile {
      display: none;
    }
  }

  .profile-section__social-desktop {
    display: none;
    margin-top: 2rem;
  }

  @media (min-width: 1024px) {
    .profile-section__social-desktop {
      display: block;
    }
  }

  .profile-section__social-heading {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--color-text);
    margin-bottom: 1rem;
  }

  .profile-section__content {
    flex: 1;
    min-width: 0;
  }

  .profile-section__role-badge {
    display: inline-flex;
    align-items: center;
    padding: 4px 12px;
    border-radius: var(--radius-full);
    font-size: 0.875rem;
    font-weight: 500;
    background: var(--color-primary-muted);
    color: var(--color-primary);
    margin-bottom: 1rem;
  }

  .profile-section__name {
    font-size: 1.5rem;
    font-weight: 700;
    letter-spacing: -0.015em;
    color: var(--color-text);
  }

  @media (min-width: 768px) {
    .profile-section__name {
      font-size: 1.875rem;
    }
  }

  .profile-section__bio {
    margin-top: 1.5rem;
    font-family: var(--font-body);
    font-size: 1rem;
    line-height: 1.75;
    color: var(--color-text-muted);
  }

  @media (min-width: 768px) {
    .profile-section__bio {
      font-size: 1.125rem;
    }
  }

  .profile-section__bio :global(a) {
    color: var(--color-primary);
    text-decoration: none;
  }

  .profile-section__bio :global(a:hover) {
    text-decoration: underline;
  }

  .profile-section__badges {
    margin-top: 2rem;
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }
</style>
